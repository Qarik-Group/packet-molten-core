etcd:
  version: 3.2.27
  advertise_client_urls:       "http://{PRIVATE_IPV4}:2379"
  initial_advertise_peer_urls: "http://{PRIVATE_IPV4}:2380"
  listen_client_urls:          "http://0.0.0.0:2379"
  listen_peer_urls:            "http://{PRIVATE_IPV4}:2380"
  discovery:                   "discovery_url"

flannel:
  network_config: '{"Network": "10.1.0.0/16"}'
  # public_ip: "{PRIVATE_IPV4}" https://github.com/coreos/flannel/issues/1192

storage:
  files:
  - filesystem: "root"
    path: "/opt/bin/mc"
    mode: 0755
    contents:
      remote:
        url: https://molton-core.s3.eu-central-1.amazonaws.com/mc-linux-amd64
        verification:
          hash:
            function: sha512
            sum: 724685116374bb28a07160b9e62e2a54002be0f87261f98345169f17efb7541c13a7abcad01c18ba7e945eaa1a908a6485b0ae7abae0c1afccff5cfd051cf355

systemd:
  units:
  - name: mc.service
    enable: true
    contents: |
      [Unit]
      Description=MoltenCore
      Requires=etcd-member.service flanneld.service coreos-metadata.service
      After=etcd-member.service flanneld.service coreos-metadata.service

      [Service]
      Type=oneshot
      EnvironmentFile=/run/metadata/coreos
      ExecStart=/opt/bin/mc init
      RemainAfterExit=true
      StandardOutput=journal
      User=root

      [Install]
      WantedBy=multi-user.target docker.service
